---
tags:
  - general-ad-play-platform
---
# 【M0 平台應用入口 (Portal)】

### ▋模組目標

- **統一入口與權限中心**：使用者一次登入 (OIDC) 後，即可依角色權限存取各模組功能。

- **簡化導航**：以兩層側邊欄 (主分類／子功能) 呈現所有目前驗證中的功能。

| **M0 平台入口 (Portal)** *(新增)* | 統一登入 / 導航 / 權限 |  OIDC Token / User Profile |  前端路由 / JWT  |  全模組 | 
|---|---|---|---|---|

### ▋核心功能流程 (F0)




| **F0** | **平台應用入口 (Portal)** *(新增)* | ➜ 使用者登入 → 權限檢核 → 導向各模組頁面 | 
|---|---|---|

```
使用者開啟 Portal → OIDC 登入 / 取得 JWT → 從 API 拉取 User Profile 與 Role → 產生可存取 Route → 導向對應子模組頁面
```

---

### ▋T1：User Story (場域擁有者視角)

| 編號 | User Story | 验收標準 | 
|---|---|---|
| US‑01 | **作為** 便利商店電子看板管理者，**我想要** 使用公司帳戶登入 Portal，**以便** 一次存取所有看板相關功能 | 成功跳轉至首頁 Dashboard，並顯示個人名稱 | 
| US‑02 | **作為** 管理者，**我想要** 看到左側功能清單，**以便** 直觀進入「廣告管理」或「分析報表」 | 展示兩層側欄，點擊可路由到對應頁面 | 
| US‑03 | **作為** 管理者，**我想要** 在「廣告管理 > 上傳」頁面上傳影片，**以便** 系統自動生成 Content Unit | 檔案上傳後可在表格中看到新素材狀態 = "解析中" | 
| US‑04 | **作為** 管理者，**我想要** 查看「感測器狀況」頁面，**以便** 快速查到離線裝置 | 畫面列出所有裝置及最後心跳時間，離線標紅 | 
| US‑05 | **作為** 管理者，**我想要** 查看「分析報表 – A 類」，**以便** 了解人流與受眾分布 | 透過 iframe 嵌入 Databricks Dashboard，並能依場域篩選 | 
| US‑06 | **作為** 管理者，**我想要** 在「權限管理」指派角色 (Admin/Viewer)，**以便** 控制團隊成員可見功能 | 角色更新後重新整理即可生效，無 403 錯誤 | 

> *側邊欄層級規劃*
>
> 1. **首頁 Dashboard**
>
> 2. **廣告管理**\
>       └ 上傳素材\
>       └ 素材清單
>
> 3. **感測器狀況**
>
> 4. **分析報表**\
>       └ 報表‑A\
>       └ 報表‑B
>
> 5. **權限管理**

---

### ▋T2：初版前端畫面規劃

- **技術棧**：Vue 3 + Vite + TailwindCSS (沿用既有前端標準)

- **佈局**：

   - `Header`：系統名稱、使用者資訊下拉、切換語系

   - `Sidebar`：兩層 menu，支援動態收合

   - `MainView`：路由出口，透過 Lazy‑load 導入各模組微前端或 iframe

- **路由策略**：路由表由後端 BFF 依角色返回 (meta 權限)，前端動態註冊

- **權限元件**：`v-permission="ROLE_ADMIN"` 指令隱藏未授權按鈕

> **嵌入 Databricks Dashboard**：
>
> - 取得公開 Embed URL → 加殼組件 `<DbxDashboard :src="url" />`
>
> - 支援場域 ID 透過 query string 傳參

---

### ▋T3：Demo 版前端開發（2 週迭代）

| 週次 | 任務 | Output | 
|---|---|---|
| W1 | 建立專案骨架、整合 OIDC、完成 Header / Sidebar 雛形 | 可登入並看到靜態側欄 | 
| W1 | 建立路由 & Lazy‑load 結構，串接假資料 JSON | 點擊菜單可切換空白頁 | 
| W2 | 完成「上傳素材」頁：檔案上傳 + 進度顯示 | 成功送出 multipart 至 Mock API | 
| W2 | 嵌入 Databricks Dashboard (報表‑A) | 可顯示基本指標圖表 | 
| W2 | 精簡版感測器列表頁 (取 mock) | 表格呈現裝置在線狀態 | 

**交付里程碑**：

- Demo URL + 簡易操作手冊

- README：專案啟動、OIDC 設定、環境變數說明

---


