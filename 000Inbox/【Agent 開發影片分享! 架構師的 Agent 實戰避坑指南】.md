【Agent 開發影片分享: 架構師的 Agent 實戰避坑指南】

剛定調完產品 Agent 開發方向，

後續準備進到技術規劃，

因為長期看到 Agent 開發踩雷文章，

看到一個很不錯的影片，

介紹他的血淚經驗。



講者戳破優雅架構的假象：

強調如果照著所謂的神文去做，

你的系統會難以維護。



我認為這段分享值得看的地方， 

是講者的邏輯是要讓系統根據需求長出來。

他用白話解釋 Agent 演化過程，

我認為能幫我省下大筆沒意義的經費。



▋Agent 是被逼著長出來的

不要為了用 Agent 而用 Agent。

如果你的問題一個 API Call 就能解決，

就別搞複雜架構，

那是給文字裝火箭推進器，毫無必要。

如果流程固定且不需要人介入，那叫工作流（Workflow），

用最簡單的自動化工具就夠了。

只有當功能多到前端放不下按鈕，

是模型能力不足、需要人類反覆介入指導時，

才是對話式 Agent 上場的時機。



▋工具添加的「爽感期」與「瓶頸期」

當 Agent Work 後，會進入一個爽感期，

每幫 Agent 增加一個工具（如搜尋、代碼執行），

它就會明顯變聰明一點，

原本做不到的事突然都能跑通了，

這時候你會感覺工具之間產生了 1+1 > 2 的湧現效應。



但很快地會進入一個詭異的「瓶頸期」：

明明工具越來越多，Agent 的成功率卻開始下降，

甚至聽不懂人話。

這不是模型不行，而是「上下文失控」。

工具的說明與數據塞滿了輸入框，模型的注意力被稀釋了。

這就是告訴你：

該進行架構升級，做上下文隔離了。



▋上下文工程

上下文工程的本質：

「上下文隔離的本質是，在做某類任務時，讓模型只看到它需要看到的內容。」 

不要讓設計師 Agent 去看代碼文檔，

也不要讓寫代碼的 Agent 去思考視覺風格。

兩者混合只會互相干擾。

這時候才需要引入頂層規劃者（Planner），

來調度下層的執行者（Sub-agent）。



▋引入記憶

記憶系統的底層邏輯：
當系統變複雜後，

記憶系統（Memory）就不再是優化項，而是必備項。

講者洞察：

不要在 Agent 之間反覆複製貼上長文本。

這不僅浪費昂貴的 Output Token，

還會因為模型「手癢」亂改內容而產生 Bug。

正確做法：

傳遞「內容的指針（路徑）」。

規劃者把代碼存進文件，

只告訴執行者「去讀文件 A」，

這樣能大幅降低錯誤率與成本。



▋過來人的底層邏輯總結

先跑出基準線（Baseline）：

不要一上來就用最重的框架畫節點。

先用最簡單的 SDK 把功能跑起來，知道底線在哪，

再決定要不要加複雜度。



區分內存與外存：

一輪對話結束就消失的叫內存，

跨輪次需要保留的（如任務狀態）叫外存。

不要一股腦全塞進對話，這會變成下一輪的噪音。



記錄「過程」而非「結果」：

除錯時，

你要存下 Agent 調用工具的順序，

消耗的 Token 以及哪些上下文沒被用到。

看過作案過程才知道哪裡該減肥。



警惕「畢業設計」陷阱：

那些高級架構文章更像是一份完美的「畢業設計圖」。

如果你第一天就照著最終形態施工，

你可能連第一根樑都立不起來。



講者結語：千萬不要讓「優雅」變成你 AI 系統設計路上的絆腳石。



 影片來源： [那些 Agent 神文沒告訴你的事：照著做，系統只會更爛](http://www.youtube.com/watch?v=b_9D7T0n4RA)


