---
name: gather-cards
description: 給定主題，自動搜尋卡片庫找出最相關的 5-15 張卡片，按文章角色分類輸出。適用於用戶說「搜集素材」「找相關卡片」「gather cards for...」時。Use when user needs to find relevant cards from the knowledge base for a writing topic.
---

# Skill: Gather Cards（卡片素材搜集器）

## 目標
給定一個寫作主題，自動搜尋 `/003_2Cards/` 和 `/003_1CardsIndex/` 找出 5-15 張最相關的卡片，按文章角色分類輸出，讓卡片系統成為文章的第一手素材來源。

## 核心原則

### 1. 廣撒網、精篩選
先大範圍搜尋，再精準篩選。寧可多搜幾張再淘汰，也不要漏掉好素材。

### 2. 跨域連結最有價值
同主題的卡片是基本盤，但跨分類的意外連結往往產生最有趣的觀點。

### 3. 素材缺口要明確
誠實指出知識庫中缺少哪些素材，讓用戶決定是否需要額外研究。

## 執行流程（強制順序）

### Step 1: 解析主題
將用戶給定的主題拆解為：
- **核心概念**：主題的 1-3 個核心關鍵詞
- **相關關鍵字**：延伸的 5-10 個相關詞（同義詞、上位概念、下位概念）
- **潛在跨域**：哪些看似無關的分類可能有意外連結

### Step 2: 搜尋索引定位
搜尋 `/003_1CardsIndex/` 中 14 個索引檔（Idx_1 到 Idx_14）：
1. 讀取索引檔的段落標題（## 標題）
2. 比對關鍵字，定位最相關的分類和段落
3. 記錄命中的索引檔和段落位置

**索引檔對照**：
| 索引 | 主題範疇 |
|------|----------|
| Idx_1-CoreConcepts | 核心思維、策略原則 |
| Idx_2-PersonKnowledgeManage | 個人知識管理、學習方法 |
| Idx_3-AiApplication | AI 應用、LLM 產品 |
| Idx_4-AiCoding | AI 輔助編程、軟體工程 |
| Idx_5-BusinessDataScience | 商業分析、數據科學 |
| Idx_6-Databricks | Databricks 技術 |
| Idx_7-ProductManager | 產品管理、PM 思維 |
| Idx_8-系統架構知識 | 系統架構設計 |
| Idx_9-軟體工程知識 | 軟體工程方法論 |
| Idx_10-系統驗測與維運 | 系統測試、DevOps |
| Idx_11-投資理財房地產 | 投資策略、理財 |
| Idx_12-個人效率與成長 | 時間管理、個人成長 |
| Idx_13-AI寫作 | AI 輔助寫作、內容創作 |
| Idx_14-世界政經科技趨勢 | 全球趨勢、產業變遷 |

### Step 3: 讀取候選卡片
1. 從命中的索引段落中，提取所有 `[[卡片名]]` 連結
2. 讀取這些卡片的完整內容（位於 `/003_2Cards/`）
3. 按以下標準評分排序：
   - 關鍵字重疊度（卡片內容與主題關鍵字的匹配程度）
   - 概念相關性（卡片的核心觀點是否能支撐文章論述）
   - 素材潛力（卡片是否提供框架、案例、數據、類比等寫作素材）

### Step 4: 跨分類搜尋
1. 在 Step 2 未命中的索引分類中，搜尋是否有意外連結
2. 重點找：
   - 可作類比的不同領域概念
   - 提供反面論述的卡片
   - 能補充案例或數據的卡片
3. 這些跨域卡片通常是文章最出彩的素材

### Step 5: 分類輸出
將篩選出的卡片按文章角色分類：
- **框架**：提供結構化思考模型的卡片
- **論據**：提供支持論點的證據、數據、案例
- **類比**：可用於解釋抽象概念的跨域類比
- **案例**：具體的故事或實例
- **反面**：提供邊界條件、反例、限制的卡片

## 輸出格式

```markdown
## 搜集結果：[主題名稱]

### 核心卡片（直接相關）
1. [[卡片名]] - [角色: 框架/論據/類比/案例] - [關鍵摘錄（1-2句）]
2. [[卡片名]] - [角色] - [關鍵摘錄]
...

### 跨域卡片（意外連結）
1. [[卡片名]] - [連結理由] - [關鍵摘錄]
2. [[卡片名]] - [連結理由] - [關鍵摘錄]
...

### 素材缺口
- [缺少的素材類型 1：例如「缺少具體數據支撐 AI 生產力提升的案例」]
- [缺少的素材類型 2]

### 搜尋摘要
- 掃描索引：X/14 個
- 候選卡片：X 張
- 精選輸出：X 張（核心 X + 跨域 X）
```

## 操作指引

**觸發條件**：
- 用戶說「搜集素材」「找相關卡片」
- 用戶說「gather cards」「find cards for...」
- `write-pipeline` 的 Step 1 (INTAKE) 自動呼叫

**輸入**：
- 必要：寫作主題或問題
- 可選：特定角度、目標讀者、文章類型

**輸出位置**：
- 獨立使用時：直接輸出到對話
- pipeline 中：寫入 Draft 檔的 `## 原始素材` 段落

## 品質檢查

完成後自我檢查：
- ✅ 核心卡片至少 3 張，不超過 10 張
- ✅ 嘗試過跨域搜尋（即使結果為零）
- ✅ 每張卡片都標註了文章角色
- ✅ 關鍵摘錄精準、可直接用於寫作
- ✅ 素材缺口誠實列出
